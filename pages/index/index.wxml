<!--index.wxml-->
<view class="container" bindtouchstart='touchStart' bindtouchmove='touchMove' bindtouchend='touchEnd'>
  <image src="{{bgImage}}" mode="aspectFill"></image>
  <view class="content">
    <view wx:if="{{curStage == 0}}">
      <progress percent="100" color="#10AEFF" active stroke-width="8" border-radius="5" show-info duration="50" />
      <text class="progressText">{{curProgress}}%</text>
    </view>

    <view wx:if="{{curStage == 1}}">
      <image class="close" src="../images/close.jpg" mode="aspectFill" bindtap="audioPlay"></image>
      <image class="music" src="../images/music.jpg" mode="aspectFill" bindtap="audioPlay" animation="{{animation}}"></image>
      <image class="share" src="../images/share.jpg" mode="aspectFill" bindtap="audioPlay"></image>
      <button class="btnStart" bindtap="startMain">开启旅程</button>
    </view>
    <view wx:if="{{curStage >= 2}}">
      <view wx:for="{{records[curStage - 2]}}">
      <text class="{{item.type}}">{{item.message}}</text>
      </view>
      <image class="next" src="../images/next.gif" mode="aspectFill" ></image>
    </view>

    <audio poster="true" src="{{src}}" id="myAudio" loop></audio>
  </view>
</view>